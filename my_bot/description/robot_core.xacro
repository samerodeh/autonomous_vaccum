<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="my_bot">

  <xacro:macro name="robot_core" params="">

    <!-- CHASSIS -->
    <link name="base_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <cylinder length="0.1" radius="0.3"/>
        </geometry>
        <material name="black">
          <color rgba="0 0 0 1"/>
        </material>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <cylinder length="0.1" radius="0.3"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0.15 0 0.075" rpy="0 0 0"/>
        <mass value="0.5"/>
        <inertia
          ixx="0.001666666666666667" ixy="0" ixz="0"
          iyy="0.001666666666666667" iyz="0"
          izz="0.0025000000000000005"/>
      </inertial>
    </link>

    <!-- Gazebo material for chassis -->
    <gazebo reference="base_link">
      <material>Gazebo/Black</material>
    </gazebo>

    <!-- RIGHT WHEEL -->
    <link name="right_wheel">
      <visual>
        <origin xyz="0 0 0" rpy="1.5708 1.5708 0"/>
        <geometry>
          <cylinder length="0.01" radius="0.05"/>
        </geometry>
        <material name="right_wheel_white">
          <color rgba="1 1 1 1"/>
        </material>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="1.5708 1.5708 0"/>
        <geometry>
          <cylinder length="0.01" radius="0.05"/>
        </geometry>
      </collision>

      <inertial>
        <mass value="0.1"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia
          ixx="7.58e-05" ixy="0" ixz="0"
          iyy="7.58e-05" iyz="0"
          izz="1.25e-04"/>
      </inertial>
    </link>

    <gazebo reference="right_wheel">
      <material>Gazebo/Blue</material>
    </gazebo>

    <!-- LEFT WHEEL -->
    <link name="left_wheel">
      <visual>
        <origin xyz="0 0 0" rpy="1.5708 1.5708 0"/>
        <geometry>
          <cylinder length="0.01" radius="0.05"/>
        </geometry>
        <material name="left_wheel_white">
          <color rgba="1 1 1 1"/>
        </material>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="1.5708 1.5708 0"/>
        <geometry>
          <cylinder length="0.01" radius="0.05"/>
        </geometry>
      </collision>

      <inertial>
        <mass value="0.1"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia
          ixx="7.58e-05" ixy="0" ixz="0"
          iyy="7.58e-05" iyz="0"
          izz="1.25e-04"/>
      </inertial>
    </link>

    <gazebo reference="left_wheel">
      <material>Gazebo/Blue</material>
    </gazebo>

    <!-- CASTER WHEEL -->
    <link name="caster_wheel">
      <visual>
        <geometry>
          <sphere radius="0.05"/>
        </geometry>
        <material name="caster_white">
          <color rgba="1 1 1 1"/>
        </material>
      </visual>

      <collision>
        <geometry>
          <sphere radius="0.05"/>
        </geometry>
      </collision>

      <inertial>
        <mass value="0.1"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia
          ixx="1e-04" ixy="0" ixz="0"
          iyy="1e-04" iyz="0"
          izz="1e-04"/>
      </inertial>
    </link>

    <gazebo reference="caster_wheel">
      <material>Gazebo/Black</material>
      <mu1>0.001</mu1>
      <mu2>0.001</mu2>
    </gazebo>

    <!-- JOINTS -->
    <joint name="left_wheel_joint" type="continuous">
      <parent link="base_link"/>
      <child link="left_wheel"/>
      <origin xyz="0 0.3 -0.04" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
    </joint>

    <joint name="right_wheel_joint" type="continuous">
      <parent link="base_link"/>
      <child link="right_wheel"/>
      <origin xyz="0 -0.3 -0.04" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
    </joint>

    <joint name="caster_wheel_joint" type="fixed">
  	<parent link="base_link"/>
  	<child link="caster_wheel"/>
  	<origin xyz="0.24 0 -0.025" rpy="0 0 0"/>
    </joint>


  </xacro:macro>
</robot>

